<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>簽核作業</title>
    <!--<script src="https://d.line-scdn.net/liff/1.0/sdk.js"></script>
    <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>-->
    <script src="https://static.line-scdn.net/liff/edge/2.1/sdk.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0/jquery.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
    <link href="css/styles.css" rel="stylesheet" />
    <script>
		/*function initializeApp(data) {  //初始化LIFF
			var userid = data.context.userId;  //取得ID
		}*/
		/*function initializeApp() {
			liff
				.init({
					liffId: "1657090452-yZxrKlp2" // Use own liffId
				})
				.then(() => {
				　console.log('初始化成功')
				})
				.catch((err) => {
				　console.log('初始化失敗')
				});

			// Using a callback
			liff.init({ liffId: "1657090452-yZxrKlp2" }, successCallback, errorCallback);
		}*/
		function pushMsg(pname, pstartdate1, pstartdate2, pstartdate3, pstartdate4, pstartdate5) {
			if (pname == '' || pstartdate1 == '') {  //資料檢查
				alert('至少需輸入請假日期1！');
				return;
			}
			var msg = "同意";  //回傳訊息字串
			msg = msg + pname + "/";
			if(pstartdate5 != ''){
				msg = msg + pstartdate1 + "/";
				msg = msg + pstartdate2 + "/";
				msg = msg + pstartdate3 + "/";
				msg = msg + pstartdate4 + "/";
				msg = msg + pstartdate5;
			}else{
				if(pstartdate4 != ''){
					msg = msg + pstartdate1 + "/";
					msg = msg + pstartdate2 + "/";
					msg = msg + pstartdate3 + "/";
					msg = msg + pstartdate4;
				}else{
					if(pstartdate3 != ''){
						msg = msg + pstartdate1 + "/";
						msg = msg + pstartdate2 + "/";
						msg = msg + pstartdate3;
					}else{
						if(pstartdate2 != ''){
							msg = msg + pstartdate1 + "/";
							msg = msg + pstartdate2;
						}else{
							msg = msg + pstartdate1;			
						}
					}
					
				}
				
			}			

			liff.sendMessages([  //推播訊息
				{
					type: "text",
					text: msg
				}
			])
				.then(() => {
					liff.closeWindow();  //關閉視窗
				})
		}
	   window.onload = function () {
	   document.getElementById("t0").value= document.getElementById("t0").value+"xx"+JSON.stringify(liff);
			liff
				.init({
					liffId: "1657228935-olmxLZrY" // Use own liffId本機測試:1657090452-WLJZvkE2
				})
				.then(() => {
	   document.getElementById("t0").value= document.getElementById("t0").value+"初始化成功";
				　console.log('初始化成功')
				})
				.catch((err) => {
	   document.getElementById("t0").value= document.getElementById("t0").value+"初始化失敗";
				　console.log('初始化失敗')
				});
			
			$('#sure').click(function (e) {  //按下確定鈕
				pushMsg($('#name').val(), $('#startdate1').val(), $('#startdate2').val(), $('#startdate3').val(), $('#startdate4').val(), $('#startdate5').val());
			});
		};
		/*$(document).ready(function () {
			liff.init(function (data) {  //初始化LIFF
				initializeApp(data);
			});
			
			$('#sure').click(function (e) {  //按下確定鈕
				pushMsg($('#name').val(), $('#leave').val(), $('#startdate').val(), $('#enddate').val());
			});
		});*/
	</script>
</head>
<body>
<textarea id="t0"></textarea>
    <div class="row" style="margin: 10px">
        <div class="col-12" style="margin: 10px">
            <label id="Chinese_num">請假員工編號</label>
            <input type="text" id="name" class="form-control" />
            <br />
            <label id="Chinese_date1">同意請假日期1</label>
                <input type="date" id="startdate1" value="" class="form-control" />
            <br />
            <label id="Chinese_date2">同意請假日期2</label>
                <input type="date" id="startdate2" value="" class="form-control" />
            <br />
            <label id="Chinese_date3">同意請假日期3</label>
                <input type="date" id="startdate3" value="" class="form-control" />
            <br /> 
            <label id="Chinese_date4">同意請假日期4</label>
                <input type="date" id="startdate4" value="" class="form-control" />
            <br /> 
            <label id="Chinese_date5">同意請假日期5</label>
                <input type="date" id="startdate5" value="" class="form-control" />
            <br /> 
            <button class="btn btn-success btn-block" id="sure">確定</button>
        </div>

    </div>
	<!-- 機台選擇變化INPUT欄位顯示 JS-
	<script type="text/javascript" src="js/delete_block.js"></script>-->
</body>
</html>
